@{
    ViewBag.Title = "Calendar";
}
<h2>@ViewBag.Title.</h2>
<h3>@ViewBag.Message</h3>

<!DOCTYPE html>
<html>
<head>
    <title>DHXScheduler initialization sample</title>
    <style>
        body {
            background-color: #2b3e50;
        }
    </style>
</head>
<body>
    <div style="height:700px;width:900px;margin:0 auto">
        @Html.Raw(Model.Render())
        @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "__AjaxAntiForgeryForm"}))
        {
            @Html.AntiForgeryToken()
        }

    </div>

    <script>
        var days = document.getElementsByClassName('dhx_scale_holder');
        var dates = document.querySelectorAll('aria-label');

        // days.addEventListener('click', clickedDay, false);
        for (var i = 0; i < days.length; i++) {
            days[i].addEventListener('dblclick', function () {
                //console.log(this.outerHTML);
                var newText = this.outerHTML.match(/\d{1}\s[a-zA-Z]{3}\s\d{4}/);

                var date = newText[0];
                var day = date[0];
                if (day.length == 1) {
                    day = '0' + day;
                }
                if (date.match(/Oct/)) {
                    var month = 10;
                }
                var year = date.match(/\d{4}/);

                var clickedDate = year + "-" + month + "-" + day;
                var redirectDate = year + month + day;

                console.log(redirectDate);
                doPost(clickedDate, redirectDate);
            }, false);
        }

        var d = new Date(2018, 11, 30);

        function doPost(clickedDate, redirectDate) {
            var form = $('#__AjaxAntiForgeryForm');
            var token = $('input[name="__RequestVerificationToken"]', form).val();
            $.post("/Day/Create",
                {
                    
                    __RequestVerificationToken: token,
                    Date: clickedDate
                    
                });

            window.location.href = 'http://localhost:65386/WorkDay/CreateDate/?date=' + redirectDate;
        }
    </script>
</body>
</html>